const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JoyrideUtil-CUO9T0rG.js","assets/redux-BaDTb7KV.js","assets/react-D41Hy763.js","assets/App-CmgZ6DIL.js","assets/index-DJml4fkD.js","assets/index-D6jNPpPU.css"])))=>i.map(i=>d[i]);
import{_ as e,R as t,u as r,t as s,V as a,K as n,e as o,x as u,b as c,j as i,f as l,g as d,h,i as f,m}from"./index-DJml4fkD.js";import{r as p}from"./redux-BaDTb7KV.js";import{j as y,E as g,S as k,A as T}from"./JoyrideUtil-CUO9T0rG.js";import{l as b,u as E,S as R,aN as S}from"./App-CmgZ6DIL.js";import"./react-D41Hy763.js";const j=[{target:".tour-step-2",content:"To use the Sorter, drag contestants you want to rank from the left to the right column",disableBeacon:!0},{target:".tour-step-4",content:'Click "View List" to see your unranked list',disableBeacon:!0},{target:".tour-step-10",content:"Click here to open the Sorter",disableBeacon:!0},{target:".sort-tour-step-modal",content:"Answer the prompts with the contestant you prefer",disableBeacon:!0},{target:".tour-step-18",content:"Once you're done, you can generate a ranking that reflects all of your choices. Neat!",disableBeacon:!0},{target:".tour-step-18",content:i.jsxs(i.Fragment,{children:[i.jsx("p",{children:"Enjoy your new ranking! You can save or share it by copying the URL."}),i.jsx("br",{}),i.jsx("p",{children:"Note that you can use the sorter in adv mode (across multiple years) and even with categorized rankings. Have fun!"})]}),disableBeacon:!0}],w=w=>{const x=b(),v=E((e=>e.year)),P=E((e=>e.categories)),_=E((e=>e.rankedItems)),U=E((e=>e.unrankedItems)),[B,F]=p.useState(!1),I=R(),[L,M]=p.useState(""),[A,C]=p.useState(0),[O,N]=p.useState(null),V=p.useRef({}),D=p.useRef(null);p.useEffect((()=>{w.runTour&&e((()=>import("./JoyrideUtil-CUO9T0rG.js").then((e=>e.i))),__vite__mapDeps([0,1,2,3,4,5])).then((e=>{N((()=>e.default)),C(0),V.current={}})),w.runTour!==B&&(w.runTour?(M(window.location.search),r({g:void 0,t:""}),x(s(!1)),x(a("")),I(),C(0),V.current={}):!w.runTour&&B&&(t(L,void 0),D.current&&(clearTimeout(D.current),D.current=null)),F(w.runTour))}),[w.runTour]),p.useEffect((()=>{if(!B)return;const e=A;V.current[e]||(V.current[e]=!0,async function(e){try{switch(e){case 0:"2025"!==v&&(x(u("2025")),w.setRefreshUrl(Math.random())),await H(v),x(n("")),x(o(!0)),S("",P,x),x(c(!1)),setTimeout((()=>{J()}),500);break;case 1:0===_.length&&J(),x(o(!0));break;case 2:x(o(!1)),w.setRefreshUrl(Math.random());break;case 3:setTimeout((()=>{w.openSortModal()}),300);break;case 4:setTimeout((()=>{w.closeSortModal()}),300);break;case 5:await H(v),x(n("")),x(o(!0));break;case 6:w.setRunTour(!1),C(0)}}catch(t){}}(e))}),[A,B]);async function H(e){try{const t=await l(e,"");x(d(t)),x(h(t)),x(f([])),m(P),w.setRefreshUrl(Math.random())}catch(t){}}function J(){const e=["fi","se","dk","al","ee","pt"],t=U.filter((t=>e.includes(t.country.key.toLowerCase())));if(0===t.length){if(U.length>=6){const e=U.slice(0,6),t=U.slice(6);x(f(e)),x(h(t)),x(n("Example Ranking")),w.setRefreshUrl(Math.random())}return}const r=U.filter((t=>!e.includes(t.country.key.toLowerCase()))),s=[...e.map((e=>t.find((t=>t.country.key.toLowerCase()===e)))).filter((e=>void 0!==e)),..._];x(f(s)),x(h(r)),x(n("Example Ranking")),w.setRefreshUrl(Math.random())}return O?i.jsx(i.Fragment,{children:i.jsx(O,{callback:e=>{const{action:t,index:r,status:s,type:a}=e;if(a===g.STEP_BEFORE&&0===r&&H(v),[k.FINISHED,k.SKIPPED].includes(s))return w.setRunTour(!1),void C(0);if(t!==T.CLOSE||a!==g.STEP_AFTER){if(a===g.STEP_AFTER){D.current&&clearTimeout(D.current);const e=r+(t===T.PREV?-1:1);D.current=setTimeout((()=>{C(e)}),100)}}else w.setRunTour(!1)},continuous:!0,run:B,stepIndex:A,steps:j,styles:y,disableOverlay:!1,disableScrolling:!0,disableScrollParentFix:!0,showProgress:!0},`joyride-tour-${A}`)}):null};export{w as default};
