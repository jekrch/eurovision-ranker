import{O as t,N as n,P as e}from"./index-BbC3N_q2.js";import{a2 as o}from"./App-D80nlGs_.js";var a=(t=>(t.TEXT="Text",t.JSON="Json",t.CSV="Csv",t.EXCEL="Excel",t))(a||{});function s(t){var n;const e=null==(n=Object.entries(a).find((([n,e])=>e===t)))?void 0:n[1];if(e)return i[e]}const i={Text:{name:"Text",fileExtension:"txt"},Json:{name:"Json",fileExtension:"json"},Csv:{name:"Csv",fileExtension:"csv"},Excel:{name:"Excel",fileExtension:"xls"}};function c(o){const a=t(o),s=n(o),i=o.map(((t,n)=>{var e,o,i,c,r,l,u,d,v;const f={rank:n+1,countryName:t.country.name,countryKey:t.country.key,artist:(null==(e=t.contestant)?void 0:e.artist)||"",song:(null==(o=t.contestant)?void 0:o.song)||"",youtube:(null==(i=t.contestant)?void 0:i.youtube)||""};return a&&(f.juryVotes=(null==(r=null==(c=t.contestant)?void 0:c.votes)?void 0:r.juryPoints)||0),s&&(f.teleVotes=(null==(u=null==(l=t.contestant)?void 0:l.votes)?void 0:u.telePoints)||0),f.totalVotes=(null==(v=null==(d=t.contestant)?void 0:d.votes)?void 0:v.totalPoints)||0,f}));return e.unparse(i,{header:!0,skipEmptyLines:!0})}async function r(t){let n=c(t),o=await(a=n,new Promise(((t,n)=>{e.parse(a,{header:!0,complete:n=>{t(n.data)},error:t=>{n(t)}})})));var a;return JSON.stringify(o)}const l=(t,n)=>{const e=new Blob(["\ufeff"+t],{type:`text/${n};charset=utf-8;`}),o=URL.createObjectURL(e),a=document.createElement("a");a.href=o,a.setAttribute("download",`escRanking.${n}`),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)};async function u(){await d(window.location.href),o.success("Copied to clipboard")}const d=async t=>{try{await navigator.clipboard.writeText(t)}catch(n){}};async function v(t,n){switch(t){case a.CSV:case a.EXCEL:return c(n);case a.JSON:return await r(n);case a.TEXT:default:return n.map(((t,n)=>{var e,o;return`${n+1}. ${t.country.name}: ${null==(e=null==t?void 0:t.contestant)?void 0:e.artist} "${null==(o=t.contestant)?void 0:o.song}"`})).join("\n")}}async function f(t,n){let e=await v(n,t);await d(e),o.success("Copied to clipboard")}export{a as E,f as a,s as b,u as c,l as d,v as g};
