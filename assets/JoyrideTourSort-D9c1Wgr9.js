const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JoyrideUtil-BCLXpWd6.js","assets/redux-BaDTb7KV.js","assets/react-D41Hy763.js","assets/App-ksKnegs5.js","assets/index-Bpx4Vlgm.js","assets/index-xmiRyoNV.css"])))=>i.map(i=>d[i]);
import{_ as e,S as t,u as r,v as s,q as a,L as n,e as o,y as u,b as c,j as i,f as l,g as d,h,i as f,m}from"./index-Bpx4Vlgm.js";import{r as p}from"./redux-BaDTb7KV.js";import{j as y,E as g,S as k,A as T}from"./JoyrideUtil-BCLXpWd6.js";import{l as b,u as E,U as R,aO as S}from"./App-ksKnegs5.js";import"./react-D41Hy763.js";const j=[{target:".tour-step-2",content:"To use the Sorter, drag contestants you want to rank from the left to the right column",disableBeacon:!0},{target:".tour-step-4",content:'Click "View List" to see your unranked list',disableBeacon:!0},{target:".tour-step-10",content:"Click here to open the Sorter",disableBeacon:!0},{target:".sort-tour-step-modal",content:"Answer the prompts with the contestant you prefer",disableBeacon:!0},{target:".tour-step-18",content:"Once you're done, you can generate a ranking that reflects all of your choices. Neat!",disableBeacon:!0},{target:".tour-step-18",content:i.jsxs(i.Fragment,{children:[i.jsx("p",{children:"Enjoy your new ranking! You can save or share it by copying the URL."}),i.jsx("br",{}),i.jsx("p",{children:"Note that you can use the sorter in adv mode (across multiple years) and even with categorized rankings. Have fun!"})]}),disableBeacon:!0}],w=w=>{const x=b(),v=E((e=>e.year)),P=E((e=>e.categories)),U=E((e=>e.rankedItems)),_=E((e=>e.unrankedItems)),[L,B]=p.useState(!1),F=R(),[I,M]=p.useState(""),[A,C]=p.useState(0),[O,q]=p.useState(null),D=p.useRef({}),N=p.useRef(null);p.useEffect((()=>{w.runTour&&e((()=>import("./JoyrideUtil-BCLXpWd6.js").then((e=>e.i))),__vite__mapDeps([0,1,2,3,4,5])).then((e=>{q((()=>e.default)),C(0),D.current={}})),w.runTour!==L&&(w.runTour?(M(window.location.search),r({g:void 0,t:""}),x(s(!1)),x(a("")),F(),C(0),D.current={}):!w.runTour&&L&&(t(I,void 0),N.current&&(clearTimeout(N.current),N.current=null)),B(w.runTour))}),[w.runTour]),p.useEffect((()=>{if(!L)return;const e=A;D.current[e]||(D.current[e]=!0,async function(e){try{switch(e){case 0:"2025"!==v&&(x(u("2025")),w.setRefreshUrl(Math.random())),await V(v),x(n("")),x(o(!0)),S("",P,x),x(c(!1)),setTimeout((()=>{H()}),500);break;case 1:0===U.length&&H(),x(o(!0));break;case 2:x(o(!1)),w.setRefreshUrl(Math.random());break;case 3:setTimeout((()=>{w.openSortModal()}),300);break;case 4:setTimeout((()=>{w.closeSortModal()}),300);break;case 5:await V(v),x(n("")),x(o(!0));break;case 6:w.setRunTour(!1),C(0)}}catch(t){}}(e))}),[A,L]);async function V(e){try{const t=await l(e,"");x(d(t)),x(h(t)),x(f([])),m(P),w.setRefreshUrl(Math.random())}catch(t){}}function H(){const e=["fi","se","dk","al","ee","pt"],t=_.filter((t=>e.includes(t.country.key.toLowerCase())));if(0===t.length){if(_.length>=6){const e=_.slice(0,6),t=_.slice(6);x(f(e)),x(h(t)),x(n("Example Ranking")),w.setRefreshUrl(Math.random())}return}const r=_.filter((t=>!e.includes(t.country.key.toLowerCase()))),s=[...e.map((e=>t.find((t=>t.country.key.toLowerCase()===e)))).filter((e=>void 0!==e)),...U];x(f(s)),x(h(r)),x(n("Example Ranking")),w.setRefreshUrl(Math.random())}return O?i.jsx(i.Fragment,{children:i.jsx(O,{callback:e=>{const{action:t,index:r,status:s,type:a}=e;if(a===g.STEP_BEFORE&&0===r&&V(v),[k.FINISHED,k.SKIPPED].includes(s))return w.setRunTour(!1),void C(0);if(t!==T.CLOSE||a!==g.STEP_AFTER){if(a===g.STEP_AFTER){N.current&&clearTimeout(N.current);const e=r+(t===T.PREV?-1:1);N.current=setTimeout((()=>{C(e)}),100)}}else w.setRunTour(!1)},continuous:!0,run:L,stepIndex:A,steps:j,styles:y,disableOverlay:!1,disableScrolling:!0,disableScrollParentFix:!0,showProgress:!0},`joyride-tour-${A}`)}):null};export{w as default};
