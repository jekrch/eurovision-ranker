const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/IntroColumn-BSehPg9W.js","assets/index-Bpx4Vlgm.js","assets/react-D41Hy763.js","assets/redux-BaDTb7KV.js","assets/index-xmiRyoNV.css","assets/App-ksKnegs5.js","assets/DisplayTab-DaWpqMGZ.js","assets/Dropdown-Cl4uaqyl.js"])))=>i.map(i=>d[i]);
import{j as e,w as t,x as r,b as s,a as n,y as a,_ as o,n as i,z as l,e as c}from"./index-Bpx4Vlgm.js";import{r as d,R as u}from"./redux-BaDTb7KV.js";import{S as m,C as x}from"./Card-C0sNgVSR.js";import{u as p,g as f,c as v,L as h,F as g,a as b,b as y,d as j,f as N,e as k,h as w,i as E,R as C,_ as S,j as M,r as T,k as R,n as D,l as P,m as O,o as L,p as I,q as $,s as _,t as A,v as U,w as z,x as Y,y as F,z as V,A as W,B,C as H,D as X,H as G,P as J,I as q,E as K}from"./App-ksKnegs5.js";import{D as Q}from"./Dropdown-Cl4uaqyl.js";import{c as Z,a as ee,E as te}from"./ExportUtil-I9jfNgR3.js";import{downloadRankingImage as re}from"./CanvasGeneratorUtil-t99qJ_bd.js";import{R as se}from"./index-zZQjEZTw.js";import"./react-D41Hy763.js";const ne=r=>{var s,n,a,o,i,l,c,u;const m=p((e=>e.categories)),x=p((e=>e.activeCategory)),C=p((e=>e.globalSearch)),S=p((e=>e.showTotalRank)),M=p((e=>e.showComparison)),T=p((e=>e.showThumbnail)),R=p((e=>e.showPlace)),D=p((e=>e.vote)),P=r.countryContestant.contestant,O=r.countryContestant.country,L=d.useRef(null),I=f(null==P?void 0:P.youtube);d.useEffect((()=>{L.current&&(L.current.scrollLeft=r.categoryScrollPosition)}),[r.categoryScrollPosition]);const $=function(){if(S||M)return j(m,r.countryContestant)}();return e.jsxs("div",{children:[e.jsxs("div",{className:v(r.className,"m-auto text-[var(--er-text-tertiary)] bg-[var(--er-surface-primary)]x bg-opacity-30 no-select","relative mx-[.5rem] min-h-[2.5em] py-[0.4em] flex flex-row","items-stretch !cursor-grabber whitespace-normal text-sm overflow-hidden","shadow border border-0.5 border-solid border-[var(--er-border-primary)] rounded-l-lg rounded-r-sm",r.isDragging?"shadow-[var(--er-button-primary-hover)] shadow-sm border-solid":"",r.isDragging||1!==r.rank?"":"first-card-glow"),style:{position:"relative"},children:[I&&T&&e.jsx("div",{className:"absolute top-0 right-0 h-full w-[30%] pointer-events-none overflow-hidden",children:e.jsx("div",{className:"relative w-full h-full",children:e.jsx("img",{src:I,className:"w-full h-full object-cover opacity-40",style:{display:"block",WebkitMaskImage:"linear-gradient(to right, transparent 0%, black 30%)",maskImage:"linear-gradient(to right, transparent 0%, black 30%)",objectPosition:"50% 50%",transform:"scale(1.1)"},onError:e=>{e.target.parentElement.parentElement.style.display="none"},onLoad:e=>{const t=e.target;120!==t.naturalWidth&&320!==t.naturalWidth||(t.parentElement.parentElement.style.display="none")},alt:""})})}),e.jsxs("div",{className:"relative z-10 flex flex-row items-stretch w-full",children:[e.jsx("div",{className:"-my-2 flex-shrink-0 pb-[1px] mr-0 font-bold w-8 pr-[0.01em] border-r-[0.05em] border-[var(--er-border-secondary)] bg-[var(--er-surface-accent-70)] bg-opacity-70 text-[var(--er-text-primary)] tracking-tighter items-center justify-center flex text-lg rounded-sm",children:r.rank}),e.jsxs("div",{className:"relative w-[5em] min-w-[4rem] -my-[0.2em]x my-1 ml-[0.2em]x ml-2 -mr-3 self-stretch overflow-hidden",children:["yu"!==O.key?e.jsx(h,{code:O.key,className:"block w-full h-full object-cover opacity-80",style:{WebkitMaskImage:"linear-gradient(to right, rgba(0,0,0,0.9) 50%, transparent 100%)",maskImage:"linear-gradient(to right, rgba(0,0,0,0.9) 50%, transparent 100%)"}}):e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/61/Flag_of_Yugoslavia_%281946-1992%29.svg",alt:"Flag of Yugoslavia",className:"block w-full h-full object-cover opacity-80",style:{WebkitMaskImage:"linear-gradient(to right, black 70%, transparent 100%)",maskImage:"linear-gradient(to right, black 70%, transparent 100%)"}}),C&&P&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-[var(--er-button-neutral-40)] text-[var(--er-text-secondary)] text-sm font-bold text-center py-1 z-10",children:P.year})]}),e.jsxs("div",{className:v("flex-grow text-[var(--er-text-secondary)] font-bold pl-3"),children:[" ",e.jsxs("div",{className:"overflow-hidden overflow-ellipsis",children:[e.jsxs("span",{className:v("float-right flex flex-row items-center",(null==P?void 0:P.youtube)?"bg-opacity-70 bg-[var(--er-surface-tertiary-70)] border-[0.1em] border-[var(--er-border-tertiary)] rounded-[0.2em] px-[0.5em] py-[0.1em] mr-[0.4em]":""),children:[(null==P?void 0:P.youtube)&&e.jsx("div",{onClick:()=>{r.openSongModal()},className:"cursor-pointer rounded text-[var(--er-text-muted)] hover:text-[var(--er-text-secondary)] mr-[1.3em] -ml-1",children:e.jsx(g,{className:"text-base",title:"lyrics"})}),(null==P?void 0:P.youtube)&&e.jsx("a",{href:null==P?void 0:P.youtube,target:"_blank",rel:"noopener noreferrer",className:"rounded text-[var(--er-text-muted)] hover:text-[var(--er-text-secondary)]",children:e.jsx(b,{className:"text-xl -m-[0.1em] my-[0.1em]",title:"youtube"})})]}),e.jsx("span",{className:"overflow-hidden overflow-ellipsis",children:null==O?void 0:O.name})]}),e.jsx("div",{className:"pr-[1.5em] flex flex-grow items-center justify-between font-normal",children:e.jsx("div",{className:"",children:P?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-xs text-sm text-[var(--er-text-tertiary)]",children:null==P?void 0:P.artist}),e.jsx("span",{className:v("ml-2 font-xs text-xs text-[var(--er-text-tertiary)] rounded-sm bg-[var(--er-surface-tertiary-70)] bg-opacity-60"),children:(null==(s=P.song)?void 0:s.length)&&!(null==(n=P.song)?void 0:n.includes("TBD"))?`"${P.song}"`:`${P.song}`}),e.jsxs("div",{className:"mt-1 font-xs text-xs text-[var(--er-text-subtle)] mb-1 flex flex-wrap",children:[void 0!==(null==(a=null==P?void 0:P.votes)?void 0:a.totalPoints)&&t(D,"t")&&e.jsxs("div",{className:"flex items-center mr-2",children:[e.jsx("span",{className:"text-[var(--er-text-muted)]",children:"total: "}),e.jsx("span",{children:`${null==(o=null==P?void 0:P.votes)?void 0:o.totalPoints}`})]}),void 0!==(null==(i=null==P?void 0:P.votes)?void 0:i.telePoints)&&t(D,"tv")&&e.jsxs("div",{className:"flex items-center mr-2",children:[e.jsx("span",{className:"text-[var(--er-text-muted)]",children:"tele: "}),e.jsx("span",{children:`${null==(l=null==P?void 0:P.votes)?void 0:l.telePoints}`})]}),void 0!==(null==(c=null==P?void 0:P.votes)?void 0:c.juryPoints)&&t(D,"j")&&e.jsxs("div",{className:"flex items-center mr-2",children:[e.jsx("span",{className:"text-[var(--er-text-muted)]",children:"jury: "}),e.jsx("span",{children:`${null==(u=null==P?void 0:P.votes)?void 0:u.juryPoints}`})]})]}),(null==P?void 0:P.finalsRank)&&R&&e.jsxs("div",{className:"mt-1 font-xs text-xs text-[var(--er-text-subtle)] mb-0 flex flex-wrap items-center mr-2",children:[e.jsx("span",{className:"text-[var(--er-text-muted)]",children:"place: "}),e.jsx("span",{children:`${null==P?void 0:P.finalsRank}`})]})]}):e.jsx("span",{className:"font-xs text-xs text-[var(--er-text-muted)] font-bold",children:"Did not participate"})})})]}),!S&&e.jsx("div",{id:"right-edge",className:"mb-[0em] absolute bottom-0 right-0 flex-shrink-0 flex flex-row justify-between text-xl font-bold text-[var(--er-text-muted)] z-10",children:e.jsx("div",{id:"gripper",className:"text-right pl-[0.3em] mr-[0.3em]",children:"⋮⋮"})})]})]},r.rank?"ranked-":`unranked-card-${(null==P?void 0:P.id)??O.id}`),(null==m?void 0:m.length)>0&&(S||M)&&e.jsx("div",{ref:L,className:"mt-0 mx-[0.6em] shadow-lg rounded-b-md bg-[var(--er-surface-tertiary)] bg-opacity-100 border-[var(--er-border-medium)] border-x-[0.01em] border-b-[0.01em] overflow-x-auto relative ml-[2em]",onScroll:r.onCategoryScroll,children:e.jsx("div",{className:"flex",children:m.map(((t,s)=>{if(!S&&s===x)return null;const n=null==$?void 0:$[t.name],{arrowIcon:a,rankDifference:o}=function(e,t){const r=e&&t?t-e:0;let s=null;return r<0?s=Math.abs(r)>=3?N:k:r>0&&(s=r>=3?w:E),{arrowIcon:s,rankDifference:r}}(r.rank,n);return e.jsxs("div",{className:"px-2 py-1 text-xs flex-shrink-0 text-[var(--er-text-tertiary)] h-[2em] flex items-center",title:`weight: ${t.weight}`,children:[e.jsxs("span",{className:"",children:[t.name,":"]})," ",e.jsx("span",{className:"ml-1 font-medium text-[var(--er-text-secondary)]",children:n||"--"}),a&&e.jsx(y,{icon:a,className:v("ml-1 inline-block text-sm text-opacity-40",o<0?"text-[var(--r-accent-success)]":"text-[var(--r-accent-error)]")})]},s)}))})})]})};function ae(e,t){if(null==e)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.includes(s))continue;r[s]=e[s]}return r}function oe(e,t){return(oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ie(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,oe(e,t)}function le(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const ce=!1,de=u.createContext(null);var ue=function(e){return e.scrollTop},me="unmounted",xe="exited",pe="entering",fe="entered",ve="exiting",he=function(e){function t(t,r){var s;s=e.call(this,t,r)||this;var n,a=r&&!r.isMounting?t.enter:t.appear;return s.appearStatus=null,t.in?a?(n=xe,s.appearStatus=pe):n=fe:n=t.unmountOnExit||t.mountOnEnter?me:xe,s.state={status:n},s.nextCallback=null,s}ie(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===me?{status:xe}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var r=this.state.status;this.props.in?r!==pe&&r!==fe&&(t=pe):r!==pe&&r!==fe||(t=ve)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,r,s=this.props.timeout;return e=t=r=s,null!=s&&"number"!=typeof s&&(e=s.exit,t=s.enter,r=void 0!==s.appear?s.appear:t),{exit:e,enter:t,appear:r}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===pe){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:C.findDOMNode(this);r&&ue(r)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===xe&&this.setState({status:me})},r.performEnter=function(e){var t=this,r=this.props.enter,s=this.context?this.context.isMounting:e,n=this.props.nodeRef?[s]:[C.findDOMNode(this),s],a=n[0],o=n[1],i=this.getTimeouts(),l=s?i.appear:i.enter;!e&&!r||ce?this.safeSetState({status:fe},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:pe},(function(){t.props.onEntering(a,o),t.onTransitionEnd(l,(function(){t.safeSetState({status:fe},(function(){t.props.onEntered(a,o)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,r=this.getTimeouts(),s=this.props.nodeRef?void 0:C.findDOMNode(this);t&&!ce?(this.props.onExit(s),this.safeSetState({status:ve},(function(){e.props.onExiting(s),e.onTransitionEnd(r.exit,(function(){e.safeSetState({status:xe},(function(){e.props.onExited(s)}))}))}))):this.safeSetState({status:xe},(function(){e.props.onExited(s)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,r=!0;return this.nextCallback=function(s){r&&(r=!1,t.nextCallback=null,e(s))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var r=this.props.nodeRef?this.props.nodeRef.current:C.findDOMNode(this),s=null==e&&!this.props.addEndListener;if(r&&!s){if(this.props.addEndListener){var n=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],a=n[0],o=n[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===me)return null;var t=this.props,r=t.children;t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef;var s=ae(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return u.createElement(de.Provider,{value:null},"function"==typeof r?r(e,s):u.cloneElement(u.Children.only(r),s))},t}(u.Component);function ge(){}he.contextType=de,he.propTypes={},he.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ge,onEntering:ge,onEntered:ge,onExit:ge,onExiting:ge,onExited:ge},he.UNMOUNTED=me,he.EXITED=xe,he.ENTERING=pe,he.ENTERED=fe,he.EXITING=ve;var be=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return s=t,void((r=e).classList?r.classList.remove(s):"string"==typeof r.className?r.className=le(r.className,s):r.setAttribute("class",le(r.className&&r.className.baseVal||"",s)));var r,s}))},ye=function(e){function t(){for(var t,r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,r){var s=t.resolveArguments(e,r),n=s[0],a=s[1];t.removeClasses(n,"exit"),t.addClass(n,a?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,r)},t.onEntering=function(e,r){var s=t.resolveArguments(e,r),n=s[0],a=s[1]?"appear":"enter";t.addClass(n,a,"active"),t.props.onEntering&&t.props.onEntering(e,r)},t.onEntered=function(e,r){var s=t.resolveArguments(e,r),n=s[0],a=s[1]?"appear":"enter";t.removeClasses(n,a),t.addClass(n,a,"done"),t.props.onEntered&&t.props.onEntered(e,r)},t.onExit=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"appear"),t.removeClasses(r,"enter"),t.addClass(r,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var r=t.resolveArguments(e)[0];t.addClass(r,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"exit"),t.addClass(r,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,r){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,r]},t.getClassNames=function(e){var r=t.props.classNames,s="string"==typeof r,n=s?""+(s&&r?r+"-":"")+e:r[e];return{baseClassName:n,activeClassName:s?n+"-active":r[e+"Active"],doneClassName:s?n+"-done":r[e+"Done"]}},t}ie(t,e);var r=t.prototype;return r.addClass=function(e,t,r){var s=this.getClassNames(t)[r+"ClassName"],n=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===r&&n&&(s+=" "+n),"active"===r&&e&&ue(e),s&&(this.appliedClasses[t][r]=s,function(e,t){e&&t&&t.split(" ").forEach((function(t){return s=t,void((r=e).classList?r.classList.add(s):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,s)||("string"==typeof r.className?r.className=r.className+" "+s:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+s)));var r,s}))}(e,s))},r.removeClasses=function(e,t){var r=this.appliedClasses[t],s=r.base,n=r.active,a=r.done;this.appliedClasses[t]={},s&&be(e,s),n&&be(e,n),a&&be(e,a)},r.render=function(){var e=this.props;e.classNames;var t=ae(e,["classNames"]);return u.createElement(he,S({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(u.Component);ye.defaultProps={classNames:""},ye.propTypes={};const je=({icon:t,text:r,className:s,url:n,onClick:a,afterClick:o,disabled:i})=>e.jsxs("li",{role:"menuitem",className:v("text-[var(--er-text-secondary)] bg-[var(--er-button-neutral)] hover:bg-[var(--er-button-neutral-hover)] flex w-full cursor-pointer select-none items-center gap-2 px-3 pt-[9px] pb-2 text-start transition-all hover:bg-blue-gray-50 hover:text-blue-gray-900 focus:bg-blue-gray-50 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900 bg-opacity-95 hover:bg-opacity-100",s),onClick:void 0!==n?()=>{return e=n,void(i||window.open(e,"_blank","noopener,noreferrer"));var e}:()=>{i||(null==a||a(),null==o||o())},children:[e.jsx("div",{className:"w-[1.2em] text-center",children:t&&e.jsx(y,{icon:t,color:i?"gray":"",className:v(i?"fill-slate-300":"")})}),e.jsx("p",{className:v("text-sm font-medium",i?"text-[var(--er-text-subtle)]":""),children:r})]}),Ne=({buttonIcon:t,text:r,children:s})=>{const[n,a]=d.useState(!1),[o,i]=d.useState({opacity:0,visibility:"hidden",transition:"opacity 200ms ease, visibility 200ms ease"}),l=d.useRef(null);d.useEffect((()=>{if(l.current){const e=l.current.getBoundingClientRect(),t={top:`${e.top+window.scrollY}px`,left:e.left+window.scrollX-180+"px",opacity:n?1:0,visibility:n?"visible":"hidden",transition:"opacity 200ms ease, visibility 200ms ease"};i(t)}}),[n]);return e.jsxs("li",{ref:l,className:v("relative bg-[var(--er-button-neutral)] hover:bg-[var(--er-button-neutral-hover)] flex w-full cursor-pointer select-none items-center justify-between gap-2 px-3 pt-[9px] pb-2 text-start transition-all bg-opacity-95 hover:bg-opacity-100",{"!bg-[var(--er-button-neutral-hover)]":n}),onClick:()=>{a(!n)},children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-[1.2em] text-center",children:t&&e.jsx(y,{icon:t})}),e.jsx("p",{className:v("text-sm font-medium mx-2"),children:r})]}),e.jsx(y,{icon:M,className:"transition-transform "+(n?"rotate-90":"")}),T.createPortal(e.jsx("ul",{style:o,className:"absolute shadow-lg shadow-blue-gray-500/10 rounded-sm border border-[var(--er-border-secondary)] overflow-auto flex flex-col min-w-[180px] z-20 ",children:s}),document.body)]})},ke=({className:t="",showText:r=!0,afterClick:s=(()=>{})})=>{const[n,a]=d.useState(!1),o=p((e=>e.name)),i=p((e=>e.rankedItems));p((e=>e.showPlace)),p((e=>e.vote));let l={};return e.jsx(je,{icon:R,text:"Download image",onClick:async()=>{if(0!==i.length){a(!0);try{await re(i,o,l)}catch(e){D.error("Failed to create image")}finally{setTimeout((()=>{a(!1)}),1e3)}}else D.error("Please rank some countries first")},afterClick:s})},we=t=>{const[s,n]=d.useState(!1),a=d.useRef(null),o=p((e=>e.rankedItems)),i=p((e=>e.headerMenuOpen)),l=P(),c=d.useRef(null),u=p((e=>e.showTotalRank)),m=e=>{var t;const r=e.target,s=(e=>{for(;e;){if(e.id&&e.id.startsWith("react-joyride"))return!0;e=e.parentElement}return!1})(r);(null==(t=a.current)?void 0:t.contains(r))||s||n(!1)};function x(){n(!1)}return d.useEffect((()=>(document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m),clearTimeout(undefined),document.body.classList.remove("no-scroll")})),[]),d.useEffect((()=>{i?(n(!0),document.body.classList.add("no-scroll"),l(r(!1))):setTimeout((()=>{document.body.classList.remove("no-scroll")}),300)}),[i]),e.jsxs("div",{className:"relative inline-block",ref:a,children:[e.jsx("button",{className:v("tour-step-6 w-6 h-6 bg-[var(--er-surface-muted-accent)] hover:bg-[var(--er-surface-light)] rounded-full flex justify-center items-center cursor-pointer",{"!bg-[var(--er-surface-light)]":s}),onClick:()=>{const e=s;n(!s),e?setTimeout((()=>{document.body.classList.remove("no-scroll")}),300):document.body.classList.add("no-scroll")},children:e.jsx(y,{className:"text-[var(--er-text-secondary)]",icon:O})}),e.jsx(ye,{in:s,timeout:200,classNames:"menu",nodeRef:c,unmountOnExit:!0,children:e.jsxs("ul",{role:"menu",className:"absolute z-20 min-w-[180px] right-0 mt-1 shadow-lg shadow-blue-gray-500/10 rounded-sm border border-[var(--er-border-secondary)] overflow-auto flex flex-col",children:[e.jsx(je,{icon:L,text:"View Heat Map",className:"tour-step-8",onClick:t.onMapClick,afterClick:x}),I(o)&&e.jsx(je,{icon:$,text:"YouTube Playlist",className:"tour-step-7",onClick:()=>{var e;return window.open(null==(e=t.generateYoutubePlaylistUrl)?void 0:e.call(t),"_blank")},afterClick:x}),e.jsx(je,{icon:_,text:"Edit Name",onClick:()=>t.openNameModal(),afterClick:x}),e.jsx(je,{icon:A,text:"Categories",className:"tour-step-9",onClick:()=>t.openConfig("categories"),afterClick:x}),e.jsx(je,{icon:U,text:"Rankings",onClick:()=>t.openConfig("rankings"),afterClick:x}),e.jsx(je,{icon:z,text:"Display settings",onClick:()=>t.openConfig("display"),afterClick:x}),e.jsx(je,{icon:Y,text:"Use Sorter",onClick:t.openSorterModal,disabled:o.length<2||u,afterClick:x}),o.length>0&&e.jsx(ke,{className:"text-[var(--r-accent-blue)] hover:text-white mr-2",iconClassName:"text-lg",afterClick:x}),e.jsxs(Ne,{text:"Copy",buttonIcon:F,children:[e.jsx(je,{text:"URL",icon:V,onClick:Z}),e.jsx(je,{text:"Text",icon:W,onClick:()=>ee(o,te.TEXT)}),e.jsx(je,{text:"CSV",icon:B,onClick:()=>ee(o,te.CSV)}),e.jsx(je,{text:"JSON",icon:B,onClick:()=>ee(o,te.JSON)})]})]})})]})},Ee=({setMapModalShow:t,generateYoutubePlaylistUrl:r,openNameModal:o,openConfig:i,supportedYears:l,className:c,downloadButton:u,openSorterModal:m})=>{const x=P(),f=p((e=>e.year)),h=p((e=>e.name)),g=p((e=>e.globalSearch)),b=p((e=>e.rankedItems)),j=p((e=>e.showTotalRank)),N=p((e=>e.categories)),k=p((e=>e.showUnranked)),w=p((e=>e.activeCategory)),[E,C]=d.useState(0);d.useEffect((()=>{0!==E?(j&&x(s(!1)),x(n(E-1))):!j&&(null==N?void 0:N.length)&&x(s(!0))}),[E]),d.useEffect((()=>{C(void 0!==w?w+1:0)}),[w]);const S=b.length<2||j;return e.jsxs("div",{className:v("z-40 rounded-t-md round-b-sm w-full text-center font-bold bg-[var(--er-surface-bar)] gradient-background text-[var(--er-text-secondary)] py-1 text-md tracking-tighter shadow-md ranked-bar-background",c),children:[k?e.jsx("div",{className:"w-full m-auto flex items-center justify-center",children:e.jsx(Q,{className:"tour-step-1 min-w-[5em] w-auto",buttonClassName:"!h-[1.8em]",value:f,onChange:e=>{x(a(e))},options:l,showSearch:!0})}):e.jsxs("div",{className:"mx-2 flex justify-between items-center",children:[e.jsxs("div",{className:"w-6 h-6 tour-step-10",children:[" ",(null==b?void 0:b.length)>0&&e.jsx("button",{title:S?"Sorter unavailable (need >1 item and not on Total Rank tab)":"Open Sorter","aria-label":"Open Sorter","data-umami-event":"Sorter Button (header)",className:v("w-6 h-6 bg-[var(--er-surface-muted-accent)] rounded-full flex justify-center items-center text-[var(--er-text-tertiary)] hover:text-[var(--er-text-muted)]",{"hover:bg-[var(--er-surface-light)] hover:cursor-pointer":!S,"opacity-50 cursor-not-allowed":S}),onClick:m,disabled:S,children:e.jsx(y,{className:"",icon:Y})})]}),e.jsxs("div",{className:"justify-center text-center flex-grow mx-2",children:[" ",g?null:f,h&&e.jsxs("span",{className:"font-bold text-[var(--er-text-tertiary)] text-md",children:[g?"":" - ",h]})]}),e.jsx(we,{openNameModal:o,openConfig:i,onMapClick:t,openSorterModal:m,generateYoutubePlaylistUrl:()=>r(b)})]}),!k&&N.length>0&&e.jsxs("div",{className:"flex bg-gray-800 bg-opacity-40 border-[var(--er-border-lightest)] mt-1 -mb-[0.2em] overflow-x-auto",children:[e.jsx(se,{placeholder:e.jsx(e.Fragment,{}),children:e.jsx("button",{className:v("px-4 py-[0.2em] text-sm font-strong flex-shrink-0",0===E?"text-[var(--r-accent-blue)] border-b-0 border-[var(--r-accent-ring)]":"text-[var(--er-text-subtle)] hover:text-[var(--er-interactive-primary)]"),onClick:()=>C(0),children:"Total"},"total-tab")},"total-ripple"),N.map(((t,r)=>e.jsx(se,{placeholder:e.jsx(e.Fragment,{}),children:e.jsx("button",{className:v("px-4 py-[0.2em] text-sm font-medium flex-shrink-0",E===r+1?"text-[var(--r-accent-blue)] border-b-0 border-[var(--r-accent-ring)]":"text-[var(--er-text-muted)] hover:text-[var(--er-interactive-primary)]"),onClick:()=>C(r+1),children:t.name},`cat-btn-${r+1}`)},`ripple-${r+1}`)))]},"total-tab-container")]})},Ce=u.lazy((()=>o((()=>import("./IntroColumn-BSehPg9W.js")),__vite__mapDeps([0,1,2,3,4,5,6,7])))),Se=t=>{const[r,s]=d.useState(!1);return d.useEffect((()=>{s(!0)}),[]),e.jsx(d.Suspense,{fallback:e.jsx("div",{className:"w-[10em]"}),children:r?e.jsx(Ce,{...t}):e.jsx("div",{children:"Loading..."})})},Me=({openSongModal:t,openModal:r,openConfigModal:s,setRunTour:n,setRunSortTour:a,openNameModal:o,openMapModal:u,openSorterModal:f})=>{const h=P(),[g,b]=d.useState(0),y=p((e=>e.showUnranked)),j=p((e=>e.theme)),N=p((e=>e.showTotalRank)),k=p((e=>e.isDeleteMode)),w=p((e=>e.rankedItems)),E=p((e=>e.categories)),C=p((e=>e.activeCategory)),[S,M]=d.useState(0),T=e=>{M(e.currentTarget.scrollLeft)};d.useEffect((()=>{0!==g&&i(C,E,w)}),[g]);const R=d.useCallback((e=>{h(H(e)),b(Math.random())}),[h]);return e.jsx("div",{className:"tour-step-5 z-20",children:e.jsx(m,{droppableId:"rankedItems",children:i=>e.jsxs("div",{className:v("grid h-full max-h-full min-h-full grid-rows-[auto_1fr]"),children:[e.jsx(Ee,{setMapModalShow:()=>u(),generateYoutubePlaylistUrl:()=>X(w),supportedYears:l,openNameModal:o,openConfig:s,openSorterModal:f,className:y?"min-w-[9em] max-w-50vw-6em":"w-[80vw] max-w-[30.5em] min-w-[20.5em]"}),e.jsx("div",{className:"px-1 overflow-y-auto h-full",children:e.jsxs("ul",{...i.droppableProps,ref:i.innerRef,className:v("overflow-y-auto overflow-x-hidden pt-3 ranked-items-background w-full h-full",y?"min-w-[9em] max-w-50vw-6em":"w-[85vw] max-w-[30em] min-w-[20em]",{"auroral-background":j.includes("ab")}),children:[0===w.length&&y&&e.jsx(Se,{openModal:r,openConfigModal:s,setRunTour:n,setRunSortTour:a}),!y&&0===w.length&&e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("span",{className:"text-center mb-40 min-mt-5 text-[var(--er-text-muted)] mx-10 text-sm",children:[e.jsx("div",{children:"Click 'Select' to choose"})," countries to rank",e.jsx("div",{children:e.jsx(G,{alt:"Heart",style:{display:"inline",verticalAlign:"middle"},className:"ml-[0.5em] mt-3 mb-1 w-6 h-6 pulse-on-load my-heart-icon"})})]})}),w.map(((r,s)=>e.jsx(J,{draggableId:(null==r?void 0:r.uid)??r.id,index:s,isDragDisabled:N,children:(n,a)=>e.jsx("li",{ref:n.innerRef,...n.draggableProps,...n.dragHandleProps,className:v("no-select m-2 mx-1",{"mt-0":0===s}),children:y?e.jsx(x,{className:"m-auto text-[var(--er-text-tertiary)] bg-[var(--er-surface-primary)] no-select",rank:s+1,countryContestant:r,isDeleteMode:y&&k,deleteCallBack:R,isDragging:a.isDragging},`card-${(null==r?void 0:r.uid)??r.id}`):e.jsx(ne,{rank:s+1,countryContestant:r,openSongModal:()=>t(r),isDragging:a.isDragging,categoryScrollPosition:S,onCategoryScroll:T},`card-${(null==r?void 0:r.uid)??r.id}`)},`li-${(null==r?void 0:r.uid)??r.id}`)},`draggable-${(null==r?void 0:r.uid)??r.id}`))),i.placeholder]})}),y&&(null==w?void 0:w.length)>0&&e.jsxs("div",{className:"pl-2 rounded-b-md h-8 !bg-[var(--er-surface-bar)] ranked-bar-background text-[var(--er-text-secondary)] items-center flex shadow-md gradient-background",children:[e.jsx(q,{className:v("tour-step-4 ml-auto py-1 pl-[0.7em] pr-[0.9em] mr-0 w-[6em]",{"tada-animation-6s":y&&(null==w?void 0:w.length)}),onClick:()=>h(c(!y)),title:"View List"}),e.jsx(K,{className:v("ml-2 mr-auto text-lg justify-center align-center bounce-right text-[var(--r-accent-blue)]",{"tada-animation":y&&(null==w?void 0:w.length)})})]})]})})})};export{Me as default};
