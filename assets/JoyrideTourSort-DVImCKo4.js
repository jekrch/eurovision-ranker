const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JoyrideUtil-6ggSsFbG.js","assets/redux-BaDTb7KV.js","assets/react-D41Hy763.js","assets/App-C05X8G7t.js","assets/index-DIAjMn2U.js","assets/index-C3hiFuee.css"])))=>i.map(i=>d[i]);
import{_ as e,S as t,u as r,t as s,W as a,L as n,e as o,y as c,b as u,j as i,f as l,g as d,h,i as f,m}from"./index-DIAjMn2U.js";import{r as p}from"./redux-BaDTb7KV.js";import{j as y,E as g,S as T,A as k}from"./JoyrideUtil-6ggSsFbG.js";import{l as E,u as b,U as S,aM as R}from"./App-C05X8G7t.js";import"./react-D41Hy763.js";const j=[{target:".tour-step-2",content:"To use the Sorter, drag contestants you want to rank from the left to the right column",disableBeacon:!0},{target:".tour-step-4",content:'Click "View List" to see your unranked list',disableBeacon:!0},{target:".tour-step-10",content:"Click here to open the Sorter",disableBeacon:!0},{target:".sort-tour-step-modal",content:"Answer the prompts with the contestant you prefer",disableBeacon:!0},{target:".tour-step-18",content:"Once you're done, you can generate a ranking that reflects all of your choices. Neat!",disableBeacon:!0},{target:".tour-step-18",content:i.jsxs(i.Fragment,{children:[i.jsx("p",{children:"Enjoy your new ranking! You can save or share it by copying the URL."}),i.jsx("br",{}),i.jsx("p",{children:"Note that you can use the sorter in adv mode (across multiple years) and even with categorized rankings. Have fun!"})]}),disableBeacon:!0}],w=w=>{const x=E(),P=b((e=>e.year)),U=b((e=>e.categories)),_=b((e=>e.rankedItems)),v=b((e=>e.unrankedItems)),[L,M]=p.useState(!1),B=S(),[F,I]=p.useState(""),[A,C]=p.useState(0),[O,D]=p.useState(null),N=p.useRef({}),V=p.useRef(null);p.useEffect((()=>{w.runTour&&e((()=>import("./JoyrideUtil-6ggSsFbG.js").then((e=>e.i))),__vite__mapDeps([0,1,2,3,4,5])).then((e=>{D((()=>e.default)),C(0),N.current={}})),w.runTour!==L&&(w.runTour?(I(window.location.search),r({g:void 0,t:""}),x(s(!1)),x(a("")),B(),C(0),N.current={}):!w.runTour&&L&&(t(F,void 0),V.current&&(clearTimeout(V.current),V.current=null)),M(w.runTour))}),[w.runTour]),p.useEffect((()=>{if(!L)return;const e=A;N.current[e]||(N.current[e]=!0,async function(e){try{switch(e){case 0:"2023"!==P&&(x(c("2023")),w.setRefreshUrl(Math.random())),await z(P),x(n("")),x(o(!0)),R("",U,x),x(u(!1)),setTimeout((()=>{H()}),500);break;case 1:0===_.length&&H(),x(o(!0));break;case 2:x(o(!1)),w.setRefreshUrl(Math.random());break;case 3:setTimeout((()=>{w.openSortModal()}),300);break;case 4:setTimeout((()=>{w.closeSortModal()}),300);break;case 5:await z(P),x(n("")),x(o(!0))}}catch(t){}}(e))}),[A,L]);async function z(e){try{const t=await l(e,"");x(d(t)),x(h(t)),x(f([])),m(U),w.setRefreshUrl(Math.random())}catch(t){}}function H(){const e=["fi","hr","es","cz","no","is"],t=v.filter((t=>e.includes(t.country.key.toLowerCase())));if(0===t.length){if(v.length>=6){const e=v.slice(0,6),t=v.slice(6);x(f(e)),x(h(t)),x(n("Example Ranking")),w.setRefreshUrl(Math.random())}return}const r=v.filter((t=>!e.includes(t.country.key.toLowerCase()))),s=[...e.map((e=>t.find((t=>t.country.key.toLowerCase()===e)))).filter((e=>void 0!==e)),..._];x(f(s)),x(h(r)),x(n("Example Ranking")),w.setRefreshUrl(Math.random())}return O?i.jsx(i.Fragment,{children:i.jsx(O,{callback:e=>{const{action:t,index:r,status:s,type:a}=e;if(a===g.STEP_BEFORE&&0===r&&z(P),[T.FINISHED,T.SKIPPED].includes(s))w.setRunTour(!1);else if(t!==k.CLOSE||a!==g.STEP_AFTER){if(a===g.STEP_AFTER){V.current&&clearTimeout(V.current);const e=r+(t===k.PREV?-1:1);V.current=setTimeout((()=>{C(e)}),100)}}else w.setRunTour(!1)},continuous:!0,run:L,stepIndex:A,steps:j,styles:y,disableOverlay:!1,disableScrolling:!0,disableScrollParentFix:!0,showProgress:!0},`joyride-tour-${A}`)}):null};export{w as default};
